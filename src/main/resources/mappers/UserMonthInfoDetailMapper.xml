<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fjs.cronus.mappers.UserMonthInfoDetailMapper">

    <select id="findAllocateDataByTimAndMedia" resultType="com.fjs.cronus.dto.avatar.FirstBarConsumeDTO">
        <foreach collection="list" separator="UNION ALL" item="item">
            SELECT `companyid` AS firstBarId, mediaid AS media, COUNT(id) AS allocate  FROM `user_month_info_detail`
            WHERE `created` &gt;= #{item.startTimeParse}
            AND `created` &lt;= #{item.endTimeParse}
            AND companyid=#{item.firstBarId}
            AND mediaid=#{item.media}
            AND `status`=1
            AND `type`=1
        </foreach>
    </select>

</mapper>